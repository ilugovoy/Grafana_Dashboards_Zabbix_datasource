# –î–∞—à–±–æ—Ä–¥ Grafana –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Linux-—Å–µ—Ä–≤–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ Zabbix

[![Grafana](https://img.shields.io/badge/Grafana-F2F4F9?style=for-the-badge&logo=grafana&logoColor=orange&labelColor=F2F4F9)](https://grafana.com) [![Zabbix](https://img.shields.io/badge/Zabbix-D50000?style=for-the-badge&logo=zabbix&logoColor=white)](https://www.zabbix.com) [![Linux](https://img.shields.io/badge/Linux-FCC624?style=for-the-badge&logo=linux&logoColor=black)](https://www.linux.com/) 

–î–∞—à–±–æ—Ä–¥ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫ Linux-—Å–µ—Ä–≤–µ—Ä–æ–≤, —Å–æ–±–∏—Ä–∞–µ–º—ã—Ö —á–µ—Ä–µ–∑ Zabbix agent.

<!-- TOC tocDepth:2..3 chapterDepth:2..6 -->
- [–î–∞—à–±–æ—Ä–¥ Grafana –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Linux-—Å–µ—Ä–≤–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ Zabbix](#–¥–∞—à–±–æ—Ä–¥-grafana-–¥–ª—è-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞-linux-—Å–µ—Ä–≤–µ—Ä–æ–≤-—á–µ—Ä–µ–∑-zabbix)
  - [üñ•Ô∏è –°–∫—Ä–∏–Ω—à–æ—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞](#Ô∏è-—Å–∫—Ä–∏–Ω—à–æ—Ç—ã-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)
  - [üìä –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–æ—Å–Ω–æ–≤–Ω—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
  - [üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–∞—à–±–æ—Ä–¥–∞](#-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-–¥–∞—à–±–æ—Ä–¥–∞)
    - [–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–º–µ—Ç—Ä–∏–∫–∏)
    - [–°–µ–∫—Ü–∏–∏ –¥–∞—à–±–æ—Ä–¥–∞](#—Å–µ–∫—Ü–∏–∏-–¥–∞—à–±–æ—Ä–¥–∞)
  - [‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ](#Ô∏è-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è-–∫-—Å–∏—Å—Ç–µ–º–µ)
  - [üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
  - [üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Zabbix](#-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-zabbix)
  - [‚ö†Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#Ô∏è-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
  - [üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è](#-–ª–∏—Ü–µ–Ω–∑–∏—è)
<!-- /TOC -->

## üñ•Ô∏è –°–∫—Ä–∏–Ω—à–æ—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

![](./pics/new_linux.png)
![–°–µ–∫—Ü–∏—è 'DISC'](./pics/new_linux_disk.png)
![–°–µ–∫—Ü–∏—è 'NET'](./pics/new_linux_net.png)
![–°–µ–∫—Ü–∏—è 'CPU & RAM'](./pics/new_linux_cpuram.png)
![–°–µ–∫—Ü–∏—è 'History & Problems'](./pics/new_linux_problems.png)

## üìä –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤: CPU, RAM, –¥–∏—Å–∫–∏, —Å–µ—Ç—å
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–±–ª–µ–º –∏ —Å–æ–±—ã—Ç–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏ —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Zabbix —Ç—Ä–∏–≥–≥–µ—Ä–∞–º–∏ –∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è–º–∏

## üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–∞—à–±–æ—Ä–¥–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã (Uptime)
- –í–µ—Ä—Å–∏—è Zabbix –∞–≥–µ–Ω—Ç–∞
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ ICMP

### –°–µ–∫—Ü–∏–∏ –¥–∞—à–±–æ—Ä–¥–∞
**NET** - –°–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
   - –ì—Ä–∞—Ñ–∏–∫ —Ç—Ä–∞—Ñ–∏–∫–∞ IN/OUT
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Ö–æ–¥—è—â–µ–º—É –∏ –∏—Å—Ö–æ–¥—è—â–µ–º—É —Ç—Ä–∞—Ñ–∏–∫—É
   
**DISC** - –î–∏—Å–∫–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ (%)
   - –û–±—â–∏–π –æ–±—ä–µ–º –¥–∏—Å–∫–æ–≤
   - –°–∫–æ—Ä–æ—Å—Ç—å —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏
   
**CPU&RAM** - –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –∏ –ø–∞–º—è—Ç—å
   - –ì—Ä–∞—Ñ–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏ CPU –∏ RAM
   - –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ CPU (—Å–∏—Å—Ç–µ–º–Ω–æ–µ/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ)
   - –û–±—â–∞—è –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ø–∞–º—è—Ç—å
   
**History & Problems** - –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–±–ª–µ–º
   - –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è —Å–æ–±—ã—Ç–∏–π
   - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ severity (Warning, Average, High)
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ

1. **Zabbix Server** (–≤–µ—Ä—Å–∏—è 6.0+)
2. **Grafana** (–≤–µ—Ä—Å–∏—è 11.0+)
3. **–ü–ª–∞–≥–∏–Ω Grafana –¥–ª—è Zabbix** ([alexanderzobnin-zabbix-app](https://grafana.com/grafana/plugins/alexanderzobnin-zabbix-app/))
4. Linux-—Å–µ—Ä–≤–µ—Ä—ã —Å:
   - Zabbix Agent 2
   - —Å–±–æ—Ä–æ–º –º–µ—Ç—Ä–∏–∫ —á–µ—Ä–µ–∑ `Linux by Zabbix Agent`


## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–ª–∞–≥–∏–Ω Zabbix –¥–ª—è Grafana –ø–æ [–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏](https://grafana.com/docs/plugins/alexanderzobnin-zabbix-app/latest/installation/) –≤–µ–Ω–¥–æ—Ä–∞
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –≤ Grafana:
    ```
    –¢–∏–ø: zabbix1-datasource
    URL: https://–≤–∞—à_zabbix_—Å–µ—Ä–≤–µ—Ä/api_jsonrpc.php
    ```
1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞—à–±–æ—Ä–¥:
    ```
    –í Grafana: `Create ‚Üí Import ‚Üí Upload JSON file`
    –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª `Linux_Basic_Metrics.json`
    ```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Zabbix
–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ —à–∞–±–ª–æ–Ω –∞–π—Ç–µ–º `Linux custom: Used memory [–ö–ª—é—á: memory.size(used)]` –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ:
![](./pics/for_memory_used_panel.png)

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–∞–Ω–Ω—ã—Ö –∏–∑ —à–∞–±–ª–æ–Ω–∞ `Linux by Zabbix Agent`  –∏ `ICMP Ping`
```plaintext
Linux: System uptime
ICMP: ICMP response time
Linux: Version of Zabbix agent running
Network: Bits received/sent
Disk: Write/Read rate
Filesystem: Space utilization
CPU: System/User time
Memory: Total/Used memory
```

## ‚ö†Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –î–∞—à–±–æ—Ä–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–∞—à–±–æ—Ä–¥—ã `VM Windows` –∏ `VMs TOP`
![](./pics/links.png)
- –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö –ø–∞–Ω–µ–ª–µ–π –≤ Web-UI Zabbix –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É `Linux Servers`, –≤–∫–ª—é—á–∞—é—â—É—é —Ö–æ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ø–∞–¥—É—Ç –≤ –¥–∞—à–±–æ—Ä–¥.
![](./pics/required_hostgroup_in_zabbix.png)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è
–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π [MIT](./LICENSE.txt)