# –î–∞—à–±–æ—Ä–¥ Grafana VMs TOP - –¢–æ–ø –º–µ—Ç—Ä–∏–∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω Linux & Windows

[![Grafana](https://img.shields.io/badge/Grafana-F2F4F9?style=for-the-badge&logo=grafana&logoColor=orange&labelColor=F2F4F9)](https://grafana.com) [![Zabbix](https://img.shields.io/badge/Zabbix-D50000?style=for-the-badge&logo=zabbix&logoColor=white)](https://www.zabbix.com) [![Linux](https://img.shields.io/badge/Linux-FCC624?style=for-the-badge&logo=linux&logoColor=black)](https://www.linux.com/) [![Windows](https://img.shields.io/badge/Windows-0078D6?style=for-the-badge&logo=windows&logoColor=white)](https://www.microsoft.com/)

–î–∞—à–±–æ—Ä–¥ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–æ–ø-4 —Ö–æ—Å—Ç–æ–≤ –ø–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º –º–µ—Ç—Ä–∏–∫–∞–º –≤ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω.

<!-- TOC tocDepth:2..3 chapterDepth:2..6 -->
- [–î–∞—à–±–æ—Ä–¥ Grafana VMs TOP - –¢–æ–ø –º–µ—Ç—Ä–∏–∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω Linux \& Windows](#–¥–∞—à–±–æ—Ä–¥-grafana-vms-top---—Ç–æ–ø-–º–µ—Ç—Ä–∏–∫-–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö-–º–∞—à–∏–Ω-linux--windows)
  - [üñ•Ô∏è –°–∫—Ä–∏–Ω—à–æ—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞](#Ô∏è-—Å–∫—Ä–∏–Ω—à–æ—Ç—ã-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)
  - [üìä –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–æ—Å–Ω–æ–≤–Ω—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
  - [üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–∞—à–±–æ—Ä–¥–∞](#-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-–¥–∞—à–±–æ—Ä–¥–∞)
    - [–°–µ–∫—Ü–∏–∏ Linux TOP –∏ Windows TOP](#—Å–µ–∫—Ü–∏–∏-linux-top-–∏-windows-top)
    - [–°–µ–∫—Ü–∏—è History \& Problems](#—Å–µ–∫—Ü–∏—è-history--problems)
  - [‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ](#Ô∏è-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è-–∫-—Å–∏—Å—Ç–µ–º–µ)
  - [üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
  - [üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Zabbix](#-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-zabbix)
  - [‚ö†Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#Ô∏è-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
    - [–ü–æ—Ä–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è](#–ø–æ—Ä–æ–≥–æ–≤—ã–µ-–∑–Ω–∞—á–µ–Ω–∏—è)
  - [üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è](#-–ª–∏—Ü–µ–Ω–∑–∏—è)
<!-- /TOC -->

## üñ•Ô∏è –°–∫—Ä–∏–Ω—à–æ—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

![](./pics/main_view.png)
![](./pics/top_panel.png)
![](./pics/problems.png)

## üìä –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–¢–æ–ø-4 —Ö–æ—Å—Ç–æ–≤** –ø–æ –∫–ª—é—á–µ–≤—ã–º –º–µ—Ç—Ä–∏–∫–∞–º
- **–¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è** —Å—Ç–∞—Ç—É—Å–æ–≤ (–∑–µ–ª–µ–Ω—ã–π/–æ—Ä–∞–Ω–∂–µ–≤—ã–π/–∫—Ä–∞—Å–Ω—ã–π)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –¥–∞–Ω–Ω—ã—Ö (–∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É)
- **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏** –Ω–∞ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã
- **–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–±–ª–µ–º** –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ

## üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–∞—à–±–æ—Ä–¥–∞

### –°–µ–∫—Ü–∏–∏ Linux TOP –∏ Windows TOP
- **Space Utilization** - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ (%)
- **Memory Utilization** - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ (%)
- **CPU Utilization** - –ù–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (%)
- **Number of processes** - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- **ICMP response time** - –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ ICMP (–º—Å)
- **Bits received/sent** - –°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫ (Bps)
- **Disk read/write rate** - –°–∫–æ—Ä–æ—Å—Ç—å –¥–∏—Å–∫–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–æ–ø–µ—Ä–∞—Ü–∏–π/—Å)

### –°–µ–∫—Ü–∏—è History & Problems
- –ò—Å—Ç–æ—Ä–∏—è —Å–æ–±—ã—Ç–∏–π –∏ –ø—Ä–æ–±–ª–µ–º
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ severity (Warning, Average, High)
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ö–æ—Å—Ç–∞–º –∏ –≤—Ä–µ–º–µ–Ω–∏

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ

1. **Zabbix Server** 6.0+
2. **Grafana** 11.0+
3. **–ü–ª–∞–≥–∏–Ω Zabbix –¥–ª—è Grafana** (alexanderzobnin-zabbix-app)

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–ª–∞–≥–∏–Ω Zabbix –¥–ª—è Grafana –ø–æ [–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏](https://grafana.com/docs/plugins/alexanderzobnin-zabbix-app/latest/installation/) –≤–µ–Ω–¥–æ—Ä–∞
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –≤ Grafana:
    ```
    –¢–∏–ø: zabbix1-datasource
    URL: https://–≤–∞—à_zabbix_—Å–µ—Ä–≤–µ—Ä/api_jsonrpc.php
    ```
1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞—à–±–æ—Ä–¥:
    ```
    –í Grafana: `Create ‚Üí Import ‚Üí Upload JSON file`
    –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª `Top_status_table.json`
    ```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Zabbix

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–∞–Ω–Ω—ã—Ö –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤ `Windows by Zabbix Agent`, `Linux by Zabbix Agent` –∏ `ICMP Ping`
```plaintext
Space utilization (%)      # –î–ª—è Windows –∏ Linux
Memory utilization (%)     # –î–ª—è Windows –∏ Linux
CPU utilization (%)        # –î–ª—è Windows –∏ Linux
Number of processes        # –î–ª—è Windows –∏ Linux
ICMP response time (ms)    # –î–ª—è –≤—Å–µ—Ö —Ö–æ—Å—Ç–æ–≤
Bits received/sent (Bps)   # –°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫
Disk read/write rate       # –î–∏—Å–∫–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
```

## ‚ö†Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –î–∞—à–±–æ—Ä–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–∞—à–±–æ—Ä–¥—ã `VM Linux` –∏ `VMs TOP`
![](./pics/links.png)
- –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö –ø–∞–Ω–µ–ª–µ–π –≤ Web-UI Zabbix –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—ã —Ö–æ—Å—Ç–æ–≤ –≤ Zabbix, –≤–∫–ª—é—á–∞—é—â–∏–µ —Ö–æ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ø–∞–¥—É—Ç –≤ –¥–∞—à–±–æ—Ä–¥.
   * –î–ª—è Linux –º–∞—à–∏–Ω:
      ```plaintext
      AWX VMs, DION VMs, ETCD VMs, FreeIPA VMs, Gitlab VMs
      Gluster FS VMs, Grafana VMs, HAProxy VMs, HCL Linux
      KSMG VMs, Keycloak VMs, MFA VMs, NTP VMs, Netbox VMs
      Nexus VMs, PAM Linux, PDNS VMs, PostgreSQL VMs
      ```
      –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `Linux Servers`.
   * –î–ª—è Windows –º–∞—à–∏–Ω - `Windows Servers`.

### –ü–æ—Ä–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
–ú–µ—Ç—Ä–∏–∫–∞ | –ó–µ–ª–µ–Ω—ã–π | –û—Ä–∞–Ω–∂–µ–≤—ã–π | –ö—Ä–∞—Å–Ω—ã–π
--------|---------|-----------|--------
CPU/Memory/Space (%) | <80 | 80-90 | >90
ICMP (–º—Å) | <200 | 200-300 | >300
Disk ops (–æ–ø–µ—Ä–∞—Ü–∏–π/—Å) | <50 | 50-100 | >100
–°–µ—Ç—å (Bps) | <50M | 50M-200M | >200M

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è
–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π [MIT](./LICENSE.txt)